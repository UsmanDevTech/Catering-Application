@model ChefPanel.ViewModels.DashboardVM;
<link rel="stylesheet" href="~/adminLTE/dist/css/Orders.css" />
<style>

    .form-control1 {
        font-size: 0.8rem;
        font-family: PoppinsFont;
        background-color: #ECF9FF;
        border: 0px solid #ced4da;
        border-radius: 0.5rem;
    }

    .container-fluid1 {
        width: 100%;
        padding-right: 39.5px;
        padding-left: 20.5px;
        margin-right: auto;
        margin-left: auto;
    }

    .span {
        font-family: PoppinsFontmedium;
    }

    .vertical-line {
        border-left: 3px solid;
        height: 78%;
        color: #26BDF4;
        position: absolute;
        left: 3%;
        top: 3px;
        transform: translateX(-50%)
    }

    .vertical-line1 {
        border-left: 3px solid;
        height: 78%;
        color: #26BDF4;
        position: absolute;
        left: -1%;
        top: 3px;
        transform: translateX(-50%)
    }

    .fontcolor {
        float: right;
        color: #EBEBEB;
    }

    .btn {
        padding: 10px 44px; /* Adjust padding as needed */
        border: none; /* Remove border if not needed */
        cursor: pointer; /* Change cursor on hover if desired */
        display: flex; /* Use flexbox for alignment */
        align-items: center; /* Center content vertically */
        font-size: 11px !important;
        justify-content: center; /* Center content horizontally */
    }

        .btn img {
            width: 16px; /* Adjust the image width as needed */
            height: auto; /* Maintain aspect ratio */
            margin-right: 5px; /* Add spacing between image and text */
        }

    .button-container {
        display: flex;
    }

    .adjust {
        width: 17px;
        height: 17px;
    }

    .active {
        background-color: #26BDF4;
    }

    .accordion-item {
        border: none;
        margin-bottom: 5px;
    }

    .accordion-header {
        display: flex;
        align-items: center;
        padding: 10px;
        background-color: #f9f9f9;
        cursor: pointer;
        user-select: none;
        border: none;
        font-size: 13px !important;
        font-weight: 500 !important;
    }

    .chevron {
        margin-left: auto;
        transition: transform 0.3s ease-out;
    }

    .rotate-chevron {
        transform: rotate(180deg);
    }

    .accordion-content {
        display: none;
        padding: 10px;
        border: none;
        background-color: #ECF9FF !important;
        border-radius: 0px 0px 10px 10px !important;
    }

    .custom-scroll {
        max-height: 80px; /* Adjust the maximum height as needed */
        overflow-y: scroll;
        scrollbar-width: none; /* Firefox */
        -ms-overflow-style: none; /* IE/Edge */
    }

        .custom-scroll::-webkit-scrollbar {
            display: none; /* Webkit (Safari, Chrome) */
        }

    .cardHeight {
        height: 217px;
    }

    .accordionBackground {
        background-color: #ECF9FF;
    }

    .accordionCustom {
        border-radius: 10px;
        border: none !important;
/*        font-family: PoppinsFontmedium;*/
    }

    .hrCustom {
        margin-bottom: 11px;
        margin-top: 0px;
    }

    .accordionItemFont {
        font-size: 12px !important;
        font-family:Poppins !important;
        font-weight: 300 !important;
    }

    .btn {
        font-family: Poppins;
    }

    .totalcount {
        margin-top: 0;
        margin-bottom: 1rem;
        font-family: PoppinsFont !important;
        color: #8692A4 !important
    }

    .counter {
        font-family: PoppinsFontmedium !important;
        color: #000000 !important;
    }
</style>


<div class="container-fluid">
    <div class="row">
        <div class="col-sm-4 col-md-4">
            <div class="vertical-line" style="height: 58% !important;top:3px!important;"></div>
            <h3 style=" margin-left: 15px;">@(!string.IsNullOrEmpty(Model?.companyName) ? Model.companyName : "N/A")</h3>
        </div>
    </div>
    <div class="row">
        <div class="col-md-2">
            <a href="/Management/Orders?status=1">
            <div class="card">
                <div class="card-body">
                    <img src="/Images/Group 239202.png" style="height: 54px;" />
                    <br />
                    <br />
                        <b class="counter" id="pendingorders" style="font-size : 30px;">
                        @Model.PendingOrders
                    </b>
                    <br />
                        <div style="margin-bottom: -10px;">
                            <p class="totalcount">Pending <br /> Orders</p>
                    </div>

                </div>
            </div>
            </a>
        </div>
        <div class="col-md-2">
            <a href="/Management/Orders?status=2">
            <div class="card">
                <div class="card-body">
                    <img src="/Images/Group 239206.png" style="height: 54px;" />
                    <br />
                    <br />
                        <b class="counter" id="completeorders" style="font-size : 30px; ">
                        @Model.CompleteOrders
                    </b>

                        <div style="margin-bottom: -10px;">
                       <p class="totalcount">Completed <br /> Orders</p>
                    </div>

                </div>
            </div>
            </a>
        </div>
        <div class="col-md-8">
            <div class="card">
                <div class="card-body cardHeight" style="overflow-y: hidden;">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="button-container row" id="orgmeal">
                                <button class="btn btn-theme3 btnstyle classcss" data-index="0">
                                    <span><img src="/Images/lunch.png" alt="Lunch Icon" /></span>
                                    Breakfast
                                </button>

                                <button class="btn btn-theme3 btnstyle classcss" data-index="1">
                                    <span><img src="/Images/g4359.png" alt="Lunch Icon" /></span>
                                    Lunch
                                </button>

                                <button class="btn btn-theme3 btnstyle classcss" data-index="2">
                                    <span><img src="/Images/Group 240591.png" alt="Dinner Icon" /></span>
                                    Dinner
                                </button>

                            </div>
                        </div>
                        <div class="col-md-6" id="appendtime">
                            <span class="float-right badge badge-light rounded" style="padding : 8px;">
                                <img class="adjust" src="/Images/time.png" />
                                9:00 am - 12:00 pm
                            </span>

                        </div>
                    </div>
                    <div id="noitem">
                    </div>
                    <br />
                    <div class="container">
                        <div class="row meal" id="breakfastcat">
                            <div class="col-md-6">
                                <div class="form-group" style="background-color: #ECF9FF; border-radius: 12px;">

                                    <select class="form-control form-control1 " id="breakfastChoice" style="background-color: #ECF9FF;">
                                        <option value="breakfast">Breakfast Choice</option>
                                        <option value="bacon-egg-cheese-bagel">Bacon Egg & Cheese Bagel</option>
                                        <option value="ham-egg-cheese-bagel">Ham Egg & Cheese Bagel</option>
                                        <option value="Western omelette">Western Omelette</option>
                                        <option value="Bacon Egg & Cheese">Bacon Egg & Cheese English Muffin</option>
                                        <option value="Choclate chip pancakes">Choclate chip pancakes</option>
                                        <option value="French Toast Sticks">French Toast Sticks</option>

                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group" style="background-color: #ECF9FF; border-radius: 12px;">

                                    <select class="form-control form-control1" id="breakfastSide" style="background-color: #ECF9FF;">
                                        <option value="Breakfast-side">Breakfast Side</option>
                                        <option value="fresh-fruits">Fresh Fruits</option>
                                        <option value="hashbrowns">Hashbrowns</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row meal" id="lunchcat" style="display: none;">
                            <div class="col-md-6">
                                <div class="form-group" style="background-color: #ECF9FF; border-radius: 12px;">

                                    <select class="form-control form-control1 " id="lunchchoice" style="background-color: #ECF9FF;">
                                        <option value="breakfast">Lunch Choice</option>
                                        <option value="bacon-egg-cheese-bagel">Bacon Egg & Cheese Bagel</option>
                                        <option value="ham-egg-cheese-bagel">Ham Egg & Cheese Bagel</option>
                                        <option value="Western omelette">Western Omelette</option>
                                        <option value="Bacon Egg & Cheese">Bacon Egg & Cheese English Muffin</option>
                                        <option value="Choclate chip pancakes">Choclate chip pancakes</option>
                                        <option value="French Toast Sticks">French Toast Sticks</option>

                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group" style="background-color: #ECF9FF; border-radius: 12px;">

                                    <select class="form-control form-control1" id="lunchside" style="background-color: #ECF9FF;">
                                        <option value="Breakfast-side">lunch Side</option>
                                        <option value="fresh-fruits">Fresh Fruits</option>
                                        <option value="hashbrowns">Hashbrowns</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row meal" id="Dinnercat" style="display: none;">
                            <div class="col-md-6">
                                <div class="form-group" style="background-color: #ECF9FF; border-radius: 12px;">

                                    <select class="form-control form-control1 " id="Dinnerchoice" style="background-color: #ECF9FF;">
                                        <option value="breakfast">Dinner Choice</option>
                                        <option value="bacon-egg-cheese-bagel">Bacon Egg & Cheese Bagel</option>
                                        <option value="ham-egg-cheese-bagel">Ham Egg & Cheese Bagel</option>
                                        <option value="Western omelette">Western Omelette</option>
                                        <option value="Bacon Egg & Cheese">Bacon Egg & Cheese English Muffin</option>
                                        <option value="Choclate chip pancakes">Choclate chip pancakes</option>
                                        <option value="French Toast Sticks">French Toast Sticks</option>

                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group" style="background-color: #ECF9FF; border-radius: 12px;">

                                    <select class="form-control form-control1" id="Dinnerside" style="background-color: #ECF9FF;">
                                        <option value="Breakfast-side">Dinner Side</option>
                                        <option value="fresh-fruits">Fresh Fruits</option>
                                        <option value="hashbrowns">Hashbrowns</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>



    </div>
    <div class="container-fluid">
        <div class="row">
            <div class="card">
                <div class="card-body">
                    <div>
                        <h3 class="">Pending Orders</h3>
                    </div>
                    <div class="table-responsive">

                        <table class="table table-bordered w-100 no-wrap" id="table-pendingorders">
                            <thead>
                                <tr class="table-active">
                                    <th class="no-wrap">Id</th>
                                    <th class="no-wrap">
                                        Order ID #
                                    </th>
                                    <th class="no-wrap">
                                        User Name
                                    </th>
                                    <th class="no-wrap">
                                        Order Time
                                    </th>
                                    <th class="no-wrap">
                                        Meal
                                    </th>
                                    <th class="no-wrap">
                                        Choice
                                    </th>
                                    <th class="no-wrap">
                                        Side
                                    </th>
                                    <th class="no-wrap">
                                        Request
                                    </th>
                                    <th>
                                        Received
                                    </th>
                                    <th class="no-wrap">
                                        Delivered At
                                    </th>
                                    <th>
                                        Status
                                    </th>
                                    <th class="no-wrap">
                                        Order Details
                                    </th>
                                    <th>
                                        Ratings
                                    </th>
@*                                    <th>
                                        Action
                                    </th>*@
                                </tr>

                            </thead>
                            <tbody>
                                <tr>
                                    <td></td>
                                    <td>
                                        1230
                                    </td>
                                    <td class="no-wrap">
                                        <img src="~/Images/image_2023_08_17T13_03_37_430Z.png" style="  width: 22px;" />
                                        John Doe
                                    </td>
                                    <td>
                                        Company 1
                                    </td>
                                    <td style="text-align:center; cursor: pointer;">
                                        <span class="white-eye" id="prof-Id12">
                                            <span class="fas fa-eye"></span>
                                        </span>
                                    </td>
                                    <td class="no-wrap">
                                        12 Aug 2023 11:00 am
                                    </td>
                                    <td>
                                        Not Yet
                                    </td>

                                    <td>
                                        Not Yet
                                    </td>

                                    <td>
                                        <span class="spanGreen1" id="pend-id"> Pending</span>
                                        <span class="spanRed d-none" id="appr-id"> approved</span>

                                    </td>

@*                                    <td style="text-align:center;">
                                        <div class="dropdown">
                                            <div class="horizontal-ellipsis">&#8942;</div>
                                            <div class="dropdown-content">
                                                <a href="#" value="Mark Complete">Mark Complete</a>
                                            </div>
                                        </div>
                                    </td>*@
                                </tr>
                            </tbody>
                        </table>
                    </div>

                </div>

            </div>
        </div>
    </div>

</div>
@* ---------order Detail modal-------- *@
<div class="modal fade" id="order_detail_modal" role="dialog">
    <div class="modal-dialog modal-md">
        <!-- Modal content-->
        <div class="modal-content" style="border-radius: 30px;">
            <div class="modal-header">
                <b id="orderId" style="font-size:18px;">Order ID: 1231223</b>

                <a class="close" data-dismiss="modal" aria-label="Close">
                    &times;
                </a>
            </div>
            <div class="modal-body justify-content-center " style=" padding: 20px;">
                <div class="row">
                    <div class="col-md-6" id="appendstatus">
                        <span class="spandefault " id="pending-id"> Pending</span>

                    </div>
                    <div class="col-md-6">
                        <div id="appendstars" class="float-right">
                            <i class="fontcolor  fas fa-star"></i>
                            <i class="fontcolor  fas fa-star"></i>
                            <i class="fontcolor fas fa-star"></i>
                            <i class="fontcolor fas fa-star"></i>
                            <i class="fontcolor  fas fa-star"></i>
                        </div>
                    </div>
                </div>
                <br />
                <div style="padding:10px;">
                    <div class="row mb-2">
                        <i class="far fa-clock" style="color: #b0b8c4;font-size:20px;"></i>
                        <span style="margin-left: 13px;" class="heading"> Time Slot</span>
                    </div>
                    <div class="row mb-2" id="timeslot">
                    </div>

                    <div class="mb-2" id="appendcategories"></div>
                    <div class="row mb-2">
                        <img src="~/Images/Path 281648.png" />
                        <span style="margin-left: 13px;" class="heading"> Special Request</span>
                    </div>
                    <div class="row mb-2" id="appendrequest">

                        <span style="margin-left: 13px;">
                            <b>
                                Lorem ipsum dolor sit amet, ahjads consect.
                                imagna aliqua Lorem ipsum sitm dol. .
                                imagna aliqua Lorem ipsum sitm dol
                            </b>
                        </span>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

@* //View Profile Modal *@
<div class="modal fade" id="user-detail-modal" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content" style="border-radius: 30px;">
            <div class="modal-header">
                <b class="modal-title" style="font-family : poppinssemibold;">User Detail</b>

                <a class="close cross" data-dismiss="modal" aria-label="Close">
                    &times;
                </a>
            </div>

            <div class="modal-body">

                <div class="login-logo" id="userImage">
                    <img src="~/Images/image_2023_08_17T13_03_37_430Z.png" style="padding : 10px;" width="150" alt="User Image">

                </div>
                <div class="row px-2 py-2" style="line-height: 2;">
                    <div class="col-md-6"><span style="font-family: PoppinsFontmedium;">Full Name</span></div>
                    <div class="col-md-6"><span style="float:right ;" class="text-muted" id="userName">John Doe</span></div>
                </div>
                <div class="row px-2 py-2" style="line-height: 2;">
                    <div class="col-md-6"><span style="font-family: PoppinsFontmedium;">Email</span></div>
                    <div class="col-md-6"><span style="float:right ;" class="text-muted" id="userEmail">Johnoe@gmail.com</span></div>
                </div>
                <div class="row px-2 py-2 d-none" style="line-height: 2;">
                    <div class="col-md-6"><span style="font-family: PoppinsFontmedium;">Phone Number</span></div>
                    <div class="col-md-6"><span style="float:right ;" class="text-muted" id="userPhone">(+92)330-1234321</span></div>
                </div>
                <div class="row px-2 py-2" style="line-height: 2;">
                    <div class="col-md-6" style="font-family:PoppinsFontmedium !important;"><span>Allergies</span></div>
                </div>

                <div id="appendallergies" class="row p-1 ml-1" style="font-family:PoppinsFontmedium !important;">
                    <span class="Alergies">&nbsp;Wheat</span>
                    <span class="Alergies">&nbsp;&nbsp;&nbsp;Gluten</span>
                    <span class="Alergies">&nbsp;&nbsp;&nbsp;Egg</span>
                    <span class="Alergies">&nbsp;&nbsp;&nbsp;Peanuts</span>

                </div>

                <br>

            </div>
        </div>
    </div>
</div>

<script>

    $(function () {

        var columns = [
            {
                "data": "id",
                "name": "id"
            },
            {
                "data": "orderId",
                "name": "orderId",
                "render": function (data, row, payload) {
                    return '<span>' + data + '</span>';
                }
            },
            {
                "data": "id",
                "name": "id",
                "render": function (data, row, payload) {
                    var imageUrl = "";
                    if (CheckNullUndefined(payload.userPic)) {
                        imageUrl = "/content/dist/img/user-dummy.png";
                    }
                    else {
                        imageUrl = payload.userPic;
                    }
                    return `<a style="cursor:pointer;" onclick="showUserDetailModal('${payload.userId}')"> <div class="user-block" style = "float: none!important;">
                                        <img class="img-circle" src ="${imageUrl}">
                                            <span class="username"> ${payload.userName}</span>
                                    </div></a>`;
                }
            },
            {
                "data": "id",
                "name": "id",
                "render": function (data, row, payload) {
                    return '<span>' + payload.timeSlot + '</span>';
                }
            },
            {
                "data": "mealName",
                "name": "mealName",
                "render": function (data, row, payload) {
                    return '<span>' + data + '</span>';
                }
            },
            {
                "data": "id",
                "name": "id",
                "render": function (data, row, payload) {
                    var choice = "";
                    if (CheckNullUndefined(payload.mealChoice)) {
                        choice = "N/A";
                    }
                    else {
                        choice = payload.mealChoice;
                    }
                    return '<span>' + choice + '</span>';
                }
            },
            {
                "data": "id",
                "name": "id",
                "render": function (data, row, payload) {
                    var choice = "";
                    if (CheckNullUndefined(payload.mealSide)) {
                        choice = "N/A";
                    }
                    else {
                        choice = payload.mealSide;
                    }
                    return '<span>' + choice + '</span>';
                }
            },
            {
                "data": "specialRequest",
                "name": "specialRequest",
                "render": function (data, row, payload) {
                    var rqeuest = "";
                    if (CheckNullUndefined(data)) {
                        request = "N/A";
                    }
                    else {
                        request = data;
                    }
                    return '<span>' + request + '</span>';
                }
            },
            //{
            //    "data": "chefName",
            //    "name": "chefName",
            //    "render": function (data, row, payload) {
            //        return '<span>' + data + '</span>';
            //    }
            //},
            {
                "data": "id",
                "name": "id",
                "render": function (data, row, payload) {
                    return '<span>' + payload.orderReceived + '</span>';
                }
            },
            {
                "data": "id",
                "name": "id",
                "render": function (data, row, payload) {
                    return '<span>' + payload.orderDelivered + '</span>';
                }
            },
            {
                "data": "id",
                "name": "id",
                "render": function (data, row, payload) {
                    if (payload.orderStatus == 0) {
                        return `<div class="no-wrap"style="text-align:center;">
                                                                            <div class="dropdown show">
                                                                                                  <a class="dropdown" href="#" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                                                                            <span class="spandefault rounded py-2 px-2">&nbsp;&nbsp;&nbsp;Pending&nbsp;&nbsp;&nbsp;</span>
                                                                                              </a>
                                                                                              <div class="dropdown-menu dropopen" aria-labelledby="dropdownMenuLink">
                                                                                                    <a class="dropdown-item cursor-pointer" id="orderMarkBtn" data-orderId=${data} data-status=${1}>Mark Complete</a>
                                                                                              </div>
                                                                                            </div>
                                                                                            </div>`;
                        //return '<div style="text-align:center;"><span class="spandefault rounded py-2 px-2">&nbsp;&nbsp;Pending&nbsp;&nbsp;</span></div>';
                    }
                    else {
                        return '<div style="text-align:center;"><span class="bg-success rounded py-2 px-2">Completed</span></div>';
                    }
                }
            },
            {
                "data": "id",
                "name": "id",
                "render": function (data, row, payload) {
                    return `<a title="OrderDetail" id="order_details" class="btn-sm btn-white-eye orderdetail" style="text-align:center; cursor: pointer;" onclick="showOrderDetailModal('${data}')"><i class="fas fa-eye"></i></a>`;
                }
            },
            {
                "data": "id",
                "name": "id",
                "render": function (data, row, payload) {
                    if (payload.orderRating == null) {
                        return '<span>Not yet</span>';
                    }
                    else {
                        if (payload.orderRating == 0) {
                            return '<span>Not yet</span>';
                        }
                        else {
                            return '<span><i class="text-warning fas fa-star"></i>' + payload.orderRating + '</span>';
                        }
                    }
                }
            }
            //{
            //    "data": "id",
            //    "name": "id",
            //    "render": function (data, row, payload) {
            //        if (payload.orderStatus == 1) {
            //            return 'N/A';
            //        }
            //        else {
            //            return `<div class="no-wrap"style="text-align:center;">
            //                                                            <div class="dropdown show">
            //                                                                                  <a class="dropdown actionBtn" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            //                                                                                <i class="fas fa-ellipsis-h"></i>
            //                                                                              </a>
            //                                                                              <div class="dropdown-menu dropopen" aria-labelledby="dropdownMenuLink">
            //                                                                                    <a class="dropdown-item cursor-pointer" id="orderMarkBtn" data-orderId=${data} data-status=${1}>Mark Complete</a>
            //                                                                              </div>
            //                                                                            </div>
            //                                                                            </div>`;
            //        }
            //    }
            //}
        ];

        var order = [[0, "desc"]];
        var columnDefs = [{
            "targets": [0],
            "visible": false,
            "searchable": false
        }];

        //Init General Datatable
        initGeneralDatatable('#table-pendingorders', '/pagination/getTableData/3', columns, order, columnDefs);

        //initDatatable('#table-item', '/pagination/getTableData/1', '#statusType', '#pageTitleFilter', columns, order, columnDefs);

    });

    //Soft Delete Feature
    $('#table-pendingorders tbody').on('click', '[id*=orderMarkBtn]', function () {
        //Get Row Data
        var data = table.row($(this).parents('tr')).data();

        var orderId = $(this).attr("data-orderId");
        var status = parseInt($(this).attr("data-status"));

        var title, confirmButtonText;

        if (status == 1) {
            title = 'Are you sure, you want to Mark this Order Complete?';
            confirmButtonText = 'Yes, Complete it!';
        }
        //else {
        //    title = 'Are you sure, you want to unblock this user?';
        //    confirmButtonText = 'Yes, Unblock it!';
        //}

        swal.fire({
            title: title,
            icon: 'warning',
            allowOutsideClick: false,
            showCloseButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            showCancelButton: true,
            confirmButtonText: confirmButtonText
        }).then((result) => {
            if (result.isConfirmed) {
                if (status == 1) {
                    loadHttpRequest("POST", "/Management/markOrderComplete?id=" + orderId + "&isStatus=" + status, softDeleteCallback);
                }
                //else {
                //    loadHttpRequest("POST", "/Management/softDeleteUser?id=" + userId + "&isStatus=" + status, softDeleteCallback);
                //}
            }
            else if (result.dismiss === Swal.DismissReason.cancel) {
                // Code to execute if "Cancel" is clicked
            }
        });
    });

    function softDeleteCallback(response) {
        Swal.fire({
            title: 'Successful',
            text: 'Order get Marked successfully.',
            icon: 'success',
            //imageUrl: '/content/dist/img/SwalSuccess.png',
            //imageAlt: 'Success Icon',
            timer: 1500,
            showCancelButton: false,
            showConfirmButton: false
        }).then(function () {
            var completeorder = parseInt($("#completeorders").text());
            var pendingorder = parseInt($("#pendingorders").text());
            completeorder = completeorder + 1;
            pendingorder = pendingorder - 1;
            $("#pendingorders").text(pendingorder);
            $("#completeorders").text(completeorder);
            table.draw();
        })
    }

    //show Company Feature
    function showOrderDetailModal(orderId) {
        $("#appendrequest").html("");
        $("#appendstars").html("");
        $("#appendstatus").html("");
        $("#timeslot").html("");
        $("#appendcategories").html("");

        $.ajax({
            type: 'GET',
            url: '/Management/GetOrderDetail?orderId=' + orderId,
            async: true,
            processData: false,
            contentType: false,
            success: function (res) {
                var order = "Order ID: " + res.orderId;
                $("#orderId").text(order);
                if (res.orderRating == 0) {
                    $("#appendstars").append(`<i class="fontcolor fas fa-star"></i>
                                    <i class="fontcolor fas fa-star"></i>
                                    <i class="fontcolor fas fa-star"></i>
                                    <i class="fontcolor fas fa-star"></i>
                                    <i class="fontcolor fas fa-star"></i>
                            `);
                }
                else if (res.orderRating == 1) {
                    $("#appendstars").append(`<i class="text-warning fas fa-star"></i>
                                        <i class="fontcolor fas fa-star"></i>
                                        <i class="fontcolor fas fa-star"></i>
                                        <i class="fontcolor fas fa-star"></i>
                                        <i class="fontcolor fas fa-star"></i>
                                `);
                }
                if (res.orderRating == 2) {
                    $("#appendstars").append(`<i class="text-warning fas fa-star"></i>
                                            <i class="text-warning fas fa-star"></i>
                                        <i class="fontcolor fas fa-star"></i>
                                        <i class="fontcolor fas fa-star"></i>
                                        <i class="fontcolor fas fa-star"></i>
                                `);
                }
                if (res.orderRating == 3) {
                    $("#appendstars").append(`<i class="text-warning fas fa-star"></i>
                                        <i class="text-warning fas fa-star"></i>
                                            <i class="text-warning fas fa-star"></i>
                                        <i class="fontcolor fas fa-star"></i>
                                        <i class="fontcolor fas fa-star"></i>
                                `);
                }
                if (res.orderRating == 4) {
                    $("#appendstars").append(`<i class="text-warning fas fa-star"></i>
                                                <i class="text-warning fas fa-star"></i>
                                                <i class="text-warning fas fa-star"></i>
                                                <i class="text-warning fas fa-star"></i>
                                            <i class="fontcolor fas fa-star"></i>
                                    `);
                }
                if (res.orderRating == 5) {
                    $("#appendstars").append(`<i class="text-warning fas fa-star"></i>
                                                <i class="text-warning fas fa-star"></i>
                                                <i class="text-warning fas fa-star"></i>
                                                <i class="text-warning fas fa-star"></i>
                                                <i class="text-warning fas fa-star"></i>
                                    `);
                }
                if (res.orderStatus == 0) {
                    $("#appendstatus").append(`<span class="spandefault rounded py-2 px-2">&nbsp;&nbsp;Pending&nbsp;&nbsp;</span>`);
                }
                else {
                    $("#appendstatus").append(`<span class="bg-success rounded py-2 px-2">Completed</span>`);
                }
                var time = "";
                if (CheckNullUndefined(res.timeSlot)) {
                    time = "No Time Slot";
                }
                else {
                    time = res.timeSlot;
                }
                $("#timeslot").append(`<span> <b>${time}</b></span>`);
                var request = "";
                if (CheckNullUndefined(res.specialRequest)) {
                    request = "No Request";
                }
                else {
                    request = res.specialRequest;
                }
                $("#appendrequest").append(`<span>
                                    <b>${request}</b>
                                </span>`);

                if (res.orderItems != null) {
                    res.orderItems.forEach(item => {
                        var oitem = `<div class="row">
                                <img src="${item.categoryIcon}" />
                                    <span style="margin-left: 13px;" class="heading"> ${item.categoryName}</span>
                            </div>
                            <div class="row mt-2">
                                <span> <b>${item.itemName}</b></span>

                            </div>`;
                        $("#appendcategories").append(oitem);
                    });
                }
                else {
                    $("#appendcategories").append('No Meal Found');
                }
            },
            error: function (error) {
                return error;
            },
        });

        //show modal
        $("#order_detail_modal").modal("toggle");
    }

    //show User Detail Feature
    function showUserDetailModal(userId) {
        $("#appendallergies").html("");
        $("#userImage").html("");

        $.ajax({
            type: 'GET',
            url: '/Management/GetUserDetail?userId=' + userId,
            async: true,
            processData: false,
            contentType: false,
            success: function (res) {
                var imageUrl = "";
                var phone = "";
                var email = "";
                var name = "";
                if (CheckNullUndefined(res.pictureUrl)) {
                    imageUrl = "/content/dist/img/user-dummy.png";
                }
                else {
                    imageUrl = res.pictureUrl;
                }

                //if (CheckNullUndefined(res.phoneNumber)) {
                //    phone = "N/A";
                //}
                //else {
                //    phone = res.phoneNumber;
                //}

                if (CheckNullUndefined(res.email)) {
                    email = "N/A";
                }
                else {
                    email = res.email;
                }

                if (CheckNullUndefined(res.fullName)) {
                    name = "N/A";
                }
                else {
                    name = res.fullName;
                }

                $("#userImage").append(`<img src="${imageUrl}" style = "padding : 10px;" width = "150" alt = "WarrenCatering" />`);
                $("#userName").text(name);
                $("#userEmail").text(email);
                //$("#userPhone").text(phone);


                if (res.allergies != null && res.allergies.length > 0) {
                    res.allergies.forEach(item => {
                        var allergy = `<span class="Alergies" style="font-family: PoppinsFontmedium;">&nbsp; ${item.name}</span>`;
                        $("#appendallergies").append(allergy);
                    });
                }
                else {
                    $("#appendallergies").append('No Allergy Found');
                }
            },
            error: function (error) {
                return error;
            },
        });

        //show modal
        $("#user-detail-modal").modal("toggle");
    }


    function showcategories(id, time, btn) {
        $("#appendtime").html("");
        $("#breakfastcat").html("");
        var index = $(btn).data("index");
        $(".btn").removeClass("active");
        $(btn).addClass("active");
        //$(".meal").hide();
        //$(".meal").eq(index).show();
        if (time != null || time != "") {
            $("#appendtime").append(`<span class="float-right badge badge-light rounded" style="padding : 8px;">
                                                <img class="adjust" src="/Images/time.png" />
                                                ${time}
                                            </span>
                                        `);
        }
        $.ajax({
            type: 'GET',
            url: '/Management/GetOrganizationMealCategories?orgMealId=' + id,
            async: true,
            processData: false,
            contentType: false,
            success: function (response) {

                if (response != null) {
                    console.log(response);
                    response.forEach((item, index) => {
                        var oitem = `<div class="col-md-6">
                                        <div class="accordion accordionBackground accordionCustom">
                                                <div class="accordion-item">
                                                    <div class="accordion-header mr-2 ml-1 accordionBackground" style="font-family:PoppinsFontmedium !important;" onclick="opencontent(this)">
                                                            ${item.name.length > 15 ? `${item.name.slice(0, 15)}...` : item.name} <span class="chevron"><i class="fas fa-chevron-down"></i></span>
                                                    </div>
                                                <div class="accordion-content px-3 py-1 custom-scroll">
                                                        <ul class="user_dw_menu p-0" id="appendcat${index}">
                                                        </ul>
                                                    </div>
                                                </div>
                                        </div>


                                    </div>`;
                        $("#breakfastcat").append(oitem);
                        if (item.mealItems != null) {
                            item.mealItems.forEach((category, i) => {
                                var mealitem = `           <li style="list-style:none;">
                                                                <label class="accordionItemFont" for="" style="font-family:PoppinsFontmedium !important;">
                                                                            ${category.itemName.length > 15 ? `${category.itemName.slice(0, 15)}...` : category.itemName}
                                                                    </label> <hr class="hrCustom" />
                                                                </li>`;
                                $("#appendcat" + index).append(mealitem);
                            });
                        }
                    });
                }
                else {
                    $("#breakfastcat").append('No Categories Found');
                }
            },
            error: function (error) {
                return error;
            },
        });
    }
    //url: '/Management/GetOrganizationMeals?weekDay=' + currentWeekday,
    $(document).ready(function () {

        // Get the current date
        var currentDate = new Date();

        // Get the current day of the week (0 = Sunday, 1 = Monday, ..., 6 = Saturday)
        var currentWeekday = currentDate.getDay();
        console.log(currentWeekday);
        $("#orgmeal").html("");
        $("#appendtime").html("");
        $("#breakfastcat").html("");
        $.ajax({
            type: 'GET',
            url: '/Management/GetOrganizationMeals?weekDay=' + currentWeekday,
            async: true,
            processData: false,
            contentType: false,
            success: function (res) {

                if (res != null && res.length > 0) {
                    console.log(res);
                    res.forEach((meal, index) => {
                        var mytime = meal.startTime + "-" + meal.endTime;
                        var orgmeal = `<div class="col-md-4"><button class="btn btn-theme3 btnstyle" id="${meal.id}-${index}" title="${meal.name}" onclick="showcategories('${meal.id}','${mytime}',this)" data-index="${index}">
                                            <span><img src="${meal.pictureUrl}" alt="${meal.name} Icon" class="rounded" /></span>
                                         ${meal.name.length > 10 ? `${meal.name.slice(0, 10)}...` : meal.name}
                                        </button></div>`;
                        $("#orgmeal").append(orgmeal);
                        if (index == 0) {
                            var id = meal.id + "-" + index;
                            $("#" + id).addClass("active");
                            var time = meal.startTime + "-" + meal.endTime;
                            if (time != null || time != "") {
                                $("#appendtime").append(`<span class="float-right badge badge-light rounded" style="padding : 8px;">
                                            <img class="adjust" src="/Images/time.png" />
                                            ${time}
                                        </span>
                                    `);
                            }
                            $.ajax({
                                type: 'GET',
                                url: '/Management/GetOrganizationMealCategories?orgMealId=' + meal.id,
                                async: true,
                                processData: false,
                                contentType: false,
                                success: function (response) {

                                    if (response != null) {
                                        console.log(response);
                                        response.forEach((item, index) => {
                                            var oitem = `<div class="col-md-6">
                                            <div class="accordion accordionBackground accordionCustom">
                                                    <div class="accordion-item">
                                                        <div class="accordion-header mr-2 ml-1 accordionBackground" onclick="opencontent(this)" style="font-family:PoppinsFontmedium !important;" title="${item.name}">
                                                                ${item.name.length > 15 ? `${item.name.slice(0, 15)}...` : item.name} <span class="chevron"><i class="fas fa-chevron-down"></i></span>
                                                        </div>
                                                    <div class="accordion-content px-3 py-1 custom-scroll">
                                                            <ul class="user_dw_menu p-0" id="appendcat${index}">
                                                            </ul>
                                                        </div>
                                                    </div>
                                            </div>


                                        </div>`;
                                            $("#breakfastcat").append(oitem);
                                            if (item.mealItems != null) {
                                                item.mealItems.forEach((category, i) => {
                                                    var mealitem = `<li style="list-style:none;">
                                                                            <label class="accordionItemFont" for="" style="font-family:PoppinsFontmedium !important;" title="${category.itemName}">
                                                                                        ${category.itemName.length > 15 ? `${category.itemName.slice(0, 15)}...` : category.itemName}
                                                                        </label> <hr class="hrCustom" />
                                                                    </li>`;
                                                    $("#appendcat" + index).append(mealitem);
                                                });
                                            }
                                        });
                                    }
                                    else {
                                        $("#breakfastcat").append('No Categories Found');
                                    }
                                },
                                error: function (error) {
                                    return error;
                                },
                            });

                        }
                    });
                }
                else {
                    $("#noitem").append(`<div class="row justify-content-center align-items-center text-center mt-3">
                            <div class="col">
                                <img src="/assets/Images/Group 2309661.png" alt="Your Image Alt Text" />
                            </div>
                        </div>
                        <div class="row justify-content-center align-items-center text-center">
                            <div class="col">
                                <h3>No Meals Created Yet For Today</h4>
                            </div>
                        </div>`);
                    //$("#appendtime").append('No Time Found');
                }
            },
            error: function (error) {
                return error;
            },
        });

        if ($('#dashboard-white').hasClass('d-none')) {
            $('#dashboard-white').removeClass('d-none');
            $('#dashboard-black').addClass('d-none');
        }
        else {
            $('#dashboard-white').addClass('d-none');
            $('#dashboard-black').removeClass('d-none');
        }
        $("#dashboard").addClass("active");
        $('#prof-Id12').click(function () {
            $('#order-detail1').modal('show');
        });
        $('#close-id15').click(function () {
            $('#order-detail1').modal('hide');
        });
        $('#company-id').click(function () {
            $('#comp-id').modal('show');
        });
        $('#cross-id').click(function () {
            $('#comp-id').modal('hide');
        });
        //$('#d-table3').DataTable();


        $(".horizontal-ellipsis").click(function () {
            $(".dropdown-content").toggle();
        });

        //dynamically accessing the data via indexes//
        $(".btn").on("click", function () {
            var index = $(this).data("index");
            $(".btn").removeClass("active");
            $(this).addClass("active");
            $(".meal").hide();
            $(".meal").eq(index).show();
        });
        $(".btn[data-index='0']").addClass("active");
        $(".meal").eq(0).show();

        $(document).click(function (event) {
            if (!$(event.target).closest(".dropdown").length) {
                $(".dropdown-content").hide();
            }
        });

    });

    //$('.accordion-header').click(function () {
    //    var chevron = $(this).find('.chevron');
    //    $(this).next('.accordion-content').slideToggle();
    //    chevron.toggleClass('rotate-chevron');
    //});
    function opencontent(btn){
        var chevron = $(btn).find('.chevron');
        $(btn).next('.accordion-content').slideToggle();
        chevron.toggleClass('rotate-chevron');
    }
</script>